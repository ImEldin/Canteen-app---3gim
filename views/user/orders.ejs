<h1>My Orders</h1>

<% orders.forEach(order => { %>
    <div>
        <h2>Order #<%= order.id %></h2>

        <p>
            <strong>Date:</strong> <%= order.created_at.toLocaleString() %><br>

            <% if (order.pickup_time) { %>
                <strong>Pickup Time:</strong> <%= order.pickup_time %><br>
            <% } %>

            <% if (order.break_slot) { %>
                <strong>Break Slot:</strong>
                <%= order.break_slot === "first_break" ? "First Break" : "Second Break" %><br>
            <% } %>

            <strong>Total Amount:</strong> <%= order.total_amount %> KM
        </p>

        <h3>Items:</h3>
        <ul>
            <% order.OrderItems.forEach(item => { %>
                <li>
                    <strong><%= item.quantity %>×</strong>
                    <%= item.MenuItem.name %> —
                    <%= item.unit_price %> KM each
                </li>
            <% }) %>
                <form action="/user/orders/<%= order.id %>/delete" method="POST" style="display:inline;">
                    <button type="submit">Delete</button>
                </form>
        </ul>

        <hr>
    </div>
<% }) %>

<a href="/user/menu">Back to Menu</a> |
<a href="/user">Back to Dashboard</a>
